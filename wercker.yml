box: wercker/default
deploy:
  steps:
    - arjen/hugo-build:
        version: 0.14
        config: $CONFIGFILE
    - lukevivier/gh-pages@0.2.1:
        token: $GIT_TOKEN
        basedir: public
  production:
    - arjen/hugo-build:
        version: 0.14
        config: $CONFIGFILE
    - edgecaseadmin/install-aws-cli:
        key: $AWS_ACCESS_KEY_ID
        secret: $AWS_SECRET_ACCESS_KEY
        region: $AWS_REGION
    - script:
        name: AWS Sync
        code: |-
          aws s3 sync --exclude '*.*' --include '*.css' --content-type 'text/css' --cache-control 'max-age=604800' --size-only ${WERCKER_SOURCE_DIR}/public/ $AWS_BUCKET_URL
