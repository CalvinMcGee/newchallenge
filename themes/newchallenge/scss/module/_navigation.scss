$menu-bg: $oil;
$menu-height: rem-calc(45);
$menu-link-bg: $oil;
$menu-link-color: $white;
$menu-link-active-bg: $primary-color;
$menu-link-active-color: $white;
$menu-link-hover-bg: $menu-link-bg;
$menu-link-hover-color: $menu-link-color;
$menu-link-active-bg-hover: scale-color($primary-color, $lightness: -14%);
$menu-link-padding: ($menu-height / 3);

.contain-to-grid {
  width: 100%;
  background: $menu-bg;
}

nav {
  overflow: hidden;
  position: relative;
  background: $menu-bg;
  height: $menu-height;

  .title-area {
    position: relative;
    margin: 0;
  }

  .name {
    height: $menu-height;
    margin: 0;

    h1, h2, h3, h4, p, span {
      line-height: $menu-height;
      font-size: rem-calc(17);
      margin: 0;
      a {
        color: $menu-link-color;
        width: 75%;
        display: block;
        padding: 0 $menu-link-padding;
      }
    }
  }

  .toggle-topbar {
    position: absolute;
    right: 0;
    top: 0;

      a {
        color: $menu-link-color;
        text-transform: uppercase;
//        font-size: $topbar-menu-link-font-size;
        font-weight: bold;
        position: relative;
        display: block;
        padding: 0 $menu-link-padding;
        height: $menu-height;
        line-height: $menu-height;
      }
  }

  ul {
    margin: 0;
    list-style: none;

    li {
      ul {
        margin: 0;
      }
    }
  }

  section {
    ul {
      display: block;

      li {
        & > a {
          background: $menu-link-bg;
          color: $menu-link-color;
          display: block;
          font-size: rem-calc(13);
          padding: 12px 0 12px 0;
          padding-left: $menu-link-padding;

          &:hover {
            background: $menu-link-hover-bg;
            color: $menu-link-hover-color;
          }
        }

        &.active > a {
          background: $menu-link-active-bg;
          color: $menu-link-active-color;

          &:hover {
            background: $menu-link-active-bg-hover;
            color: $menu-link-hover-color;
          }
        }
      }
    }
  }

  &.expanded {
    height: auto;
    background: transparent;

    .title-area { background: $menu-bg; }
  }
}

@media #{$medium-up} {
  .contain-to-grid nav {
    max-width: $row-width;
    margin: 0 auto;
  }

  nav {
    @include clearfix;
    overflow: visible;

    .title-area { float: left; }
    .name h1 a,
    .name h2 a,
    .name h3 a,
    .name h4 a,
    .name h5 a,
    .name h6 a { width: auto; }

    .toggle-topbar { display: none; }

    section {
      left: 0 !important;

      ul {
        float: right;
        width: auto;
        height: auto !important;
        display: inline;

        li {
          float: left;

          a{
            padding: 0 $menu-link-padding;
            line-height: $menu-height;
            color: $menu-link-color;
            background: $menu-link-bg;
            &:hover {
              background-color: $menu-link-hover-bg;
              color: $menu-link-hover-color;
            }
          }
        }

        .has-dropdown {
          position: relative;

          &:hover {
            & > .dropdown {
              display: block;
              @include element-invisible-off();
              position: absolute !important;
            }
          }

          & > a {
            padding-right: ($menu-link-padding + rem-calc(20));
            &:after {
              @include css-triangle(5px, rgba($menu-link-color, 0.4), top);
              margin-right: $menu-link-padding;
              position: absolute;
              right: 0;
              margin-top: -2.5px;
              top: ($menu-height / 2);
            }
          }
        }

        .dropdown {
          display: block;
          padding: 0;
          position: absolute;
          right: 0;
          top: auto;
          left: auto;
          overflow: hidden;
          z-index: 99;
          @include element-invisible();

          li {
            width: 100%;
            height: auto;

            a {
              white-space: nowrap;
            }
          }
        }

        .hide-for-medium-up {
          display: none;
        }
      }
    }
  }
}
